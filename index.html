<!DOCTYPE html>
<html lang="fr" class="light-style" dir="ltr" data-theme="theme-default" data-assets-path="assets/" data-template="vertical-menu-template-free">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />

    <script>
      (function () {
        try {
          var lang = (localStorage.getItem('learnHub:lang') || localStorage.getItem('learnHub:lang') || localStorage.getItem('vbaEco:lang') || localStorage.getItem('lang') || 'fr');
          if (['fr','en','ar'].indexOf(lang) === -1) lang = 'fr';
          document.documentElement.lang = lang;
          document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');

          // Theme (light/dark) applied early to avoid flicker
          var pref = localStorage.getItem('learnHub:theme') || 'system';
          var sysDark = false;
          try { sysDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches; } catch(e) {}
          var effective = (pref === 'system') ? (sysDark ? 'dark' : 'light') : pref;
          document.documentElement.setAttribute('data-lh-theme', effective);
        } catch (e) {}
      })();
    </script>

    <title>LearnHub — E-learning platform</title>
    <meta name="description" content="LearnHub — plateforme e-learning: cours, leçons, quiz et assistant IA. UI FR/EN/AR. Contenu via Google Sheets (Apps Script)." />

    <meta property="og:title" content="LearnHub" />
    <meta property="og:description" content="LearnHub — cours, leçons, quiz et assistant IA (FR/EN/AR). Contenu via Google Sheets." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="assets/img/og.png" />

    <link rel="icon" type="image/x-icon" href="assets/img/favicon/favicon.ico" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="assets/vendor/fonts/boxicons.css" />
    <link rel="stylesheet" href="assets/vendor/css/core.css" />
    <link rel="stylesheet" href="assets/vendor/css/theme-default.css" />
    <link rel="stylesheet" href="assets/css/demo.css" />
    <link rel="stylesheet" href="app/css/app.css" />
  </head>

  <body class="ltr landing-shell">
    <nav class="navbar navbar-expand-lg landing-nav bg-white border-bottom py-3">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center gap-2" href="#">
          <img src="assets/img/brand/logo.png" alt="LearnHub" class="lh-brand-logo" data-brand-logo />
        </a>

        <div class="d-flex align-items-center gap-2 ms-auto">
          <div class="dropdown">
            <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Language">
              <i class="bx bx-globe"></i> <span id="langLabel">FR</span>
            </button>
            <!-- On landing page the language switcher sits near the LEFT edge.
                 Using dropdown-menu-end would push the menu off-screen on mobile.
                 So we keep default alignment here. -->
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#" data-lang="fr">Français</a></li>
              <li><a class="dropdown-item" href="#" data-lang="en">English</a></li>
              <li><a class="dropdown-item" href="#" data-lang="ar">العربية</a></li>
            </ul>
          </div>

          <button class="btn btn-outline-secondary" type="button" id="lhLandingThemeToggle" aria-label="Toggle theme" title="Theme">
            <i class="bx bx-moon"></i>
          </button>

          <!-- Desktop CTAs (text) -->
          <a class="btn btn-primary d-none d-sm-inline-flex" id="lhCtaPrimary" href="app/pages/login.html">
            <i class="bx bx-log-in"></i> <span class="ms-1" data-i18n="landing.ctaLogin">Se connecter</span>
          </a>
          <a class="btn btn-outline-primary d-none d-sm-inline-flex" id="lhCtaSecondary" href="app/pages/register.html">
            <i class="bx bx-user-plus"></i> <span class="ms-1" data-i18n="landing.ctaRegister">Créer un compte</span>
          </a>
          <!-- Mobile CTAs (icons only, compact) -->
          <a class="btn btn-primary btn-sm d-inline-flex d-sm-none" id="lhCtaPrimaryMobile" href="app/pages/login.html" aria-label="Login">
            <i class="bx bx-log-in"></i>
          </a>
          <a class="btn btn-outline-primary btn-sm d-inline-flex d-sm-none" id="lhCtaSecondaryMobile" href="app/pages/register.html" aria-label="Register">
            <i class="bx bx-user-plus"></i>
          </a>
        </div>
      </div>
    </nav>

    <main class="container landing-hero">
      <div class="landing-card p-4 p-md-5 shadow-sm">
        <div class="row align-items-start g-4">
        <div class="col-12 col-lg-7">
          <h1 class="fw-bold mb-3 hero-title" data-i18n="landing.heroTitle">Apprendre. Pratiquer. Progresser.</h1>
          <p class="text-muted fs-5 mb-3 hero-subtitle" data-i18n="landing.heroSubtitle">
            Une plateforme e-learning (FR/EN) avec UI FR/EN/AR, basée sur Google Sheets. Progresse avec des leçons et des quiz.
          </p>
          <div class="d-flex flex-wrap gap-2 mb-4 hero-badges">
            <span class="badge bg-label-primary"><i class="bx bx-world"></i> FR / EN / AR</span>
            <span class="badge bg-label-success"><i class="bx bx-check-circle"></i> Quiz</span>
            <span class="badge bg-label-warning"><i class="bx bx-trending-up"></i> Progress</span>
            <span class="badge bg-label-info"><i class="bx bx-spreadsheet"></i> Google Sheets</span>
          </div>
          <div class="d-grid gap-2 d-sm-flex hero-ctas">
            <a class="btn btn-primary btn-lg" href="app/pages/home.html">
              <i class="bx bx-play"></i> <span data-i18n="landing.ctaStart">Commencer</span>
            </a>
            <a class="btn btn-outline-primary btn-lg" href="app/pages/courses.html">
              <i class="bx bx-book"></i> <span data-i18n="landing.ctaBrowseCourses">Voir les cours</span>
            </a>
          </div>
        </div>
        <div class="col-12 col-lg-5">
          <div class="hero-illustration shadow-sm mb-3 hero-carousel">
            <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4500">
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <img src="assets/img/illustrations/learnhub-hero.png" alt="LearnHub" />
                </div>
                <div class="carousel-item">
                  <img src="assets/img/illustrations/learnhub-hero-2.png" alt="LearnHub" />
                </div>
                <div class="carousel-item">
                  <img src="assets/img/illustrations/learnhub-hero-3.png" alt="LearnHub" />
                </div>
                <div class="carousel-item">
                  <img src="assets/img/illustrations/learnhub-hero-4.png" alt="LearnHub" />
                </div>
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev" aria-label="Previous">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next" aria-label="Next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
              </button>
            </div>
          </div>
          <div class="card shadow-sm landing-card">
            <div class="card-body">
              <h5 class="card-title mb-3" data-i18n="landing.featuresTitle">Ce que vous avez</h5>
              <div class="row g-3">
                <div class="col-12 col-sm-6">
                  <div class="feature-tile p-3">
                    <div class="d-flex align-items-start gap-2">
                      <span class="badge bg-label-primary"><i class="bx bx-book"></i></span>
                      <div class="flex-grow-1">
                        <div class="fw-semibold" data-i18n="landing.feature1Title">Cours bilingues</div>
                        <div class="text-muted small" data-i18n="landing.feature1Desc">FR/EN + UI FR/EN/AR</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-sm-6">
                  <div class="feature-tile p-3">
                    <div class="d-flex align-items-start gap-2">
                      <span class="badge bg-label-success"><i class="bx bx-task"></i></span>
                      <div class="flex-grow-1">
                        <div class="fw-semibold" data-i18n="landing.feature2Title">Quiz corrigés</div>
                        <div class="text-muted small" data-i18n="landing.feature2Desc">Score + meilleur score + explications</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-sm-6">
                  <div class="feature-tile p-3">
                    <div class="d-flex align-items-start gap-2">
                      <span class="badge bg-label-warning"><i class="bx bx-trending-up"></i></span>
                      <div class="flex-grow-1">
                        <div class="fw-semibold" data-i18n="landing.feature3Title">Progression</div>
                        <div class="text-muted small" data-i18n="landing.feature3Desc">Terminé / continuer / dashboard</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-sm-6">
                  <div class="feature-tile p-3">
                    <div class="d-flex align-items-start gap-2">
                      <span class="badge bg-label-info"><i class="bx bx-spreadsheet"></i></span>
                      <div class="flex-grow-1">
                        <div class="fw-semibold" data-i18n="landing.feature4Title">Google Sheets</div>
                        <div class="text-muted small" data-i18n="landing.feature4Desc">Contenu simple à maintenir</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>

      <!-- Continue learning (shown only if there is progress) -->
      <div id="continueBlock" class="landing-card p-4 p-md-4 shadow-sm mt-4" style="display:none;">
        <div class="d-flex flex-column flex-md-row align-items-start align-items-md-center justify-content-between gap-3">
          <div>
            <div class="fw-semibold mb-1" data-i18n="landing.continueTitle">Reprendre</div>
            <div class="text-muted">
              <span data-i18n="landing.continueLabel">Dernière leçon:</span>
              <span id="continueLessonTitle" class="fw-semibold"></span>
            </div>
          </div>
          <a id="continueBtn" class="btn btn-primary" href="app/pages/home.html">
            <i class="bx bx-play"></i> <span data-i18n="landing.continueCta">Continuer</span>
          </a>
        </div>
      </div>
    </main>

    <footer class="landing-footer">
      <div class="container-xxl py-3 text-center">
        <small class="text-muted">© 2026 LearnHub. Tous droits réservés.</small>
      </div>
    </footer>

    <script src="assets/vendor/libs/jquery/jquery.js"></script>
    <script src="assets/vendor/libs/popper/popper.js"></script>
    <script src="assets/vendor/js/bootstrap.js"></script>

    <script type="module">
      import { initI18n } from './app/js/i18n.js';
      import { initTheme, bindThemeToggle } from './app/js/theme.js';
      import { getLastVisitedLesson } from './app/js/storage.js';
      import { getLesson } from './app/js/api.js';

      initI18n();
      initTheme();
      bindThemeToggle(document.getElementById('lhLandingThemeToggle'));

      // Show tools dropdown only in admin mode (e.g. ?admin=1)
      try {
        const sp = new URLSearchParams(location.search);
        const isAdmin = sp.get('admin') === '1' || localStorage.getItem('learnHub:admin') === '1';
        const tools = document.getElementById('toolsDropdown');
        if (tools && isAdmin) tools.style.display = '';
      } catch(e) {}

      // Continue learning block (if progress exists)
      (async () => {
        try {
          const lastId = getLastVisitedLesson();
          if (!lastId) return;
          const lesson = await getLesson(lastId);
          if (!lesson) return;
          const titleEl = document.getElementById('continueLessonTitle');
          const btn = document.getElementById('continueBtn');
          const block = document.getElementById('continueBlock');
          if (!titleEl || !btn || !block) return;
          titleEl.textContent = lesson.title_fr || lesson.title_en || lesson.title_ar || lesson.title || String(lastId);
          btn.href = `app/pages/lesson.html?lessonId=${encodeURIComponent(lastId)}`;
          block.style.display = '';
        } catch(e) {}
      })();
    </script>
  
    <script>
      (function(){
        try {
          var token = localStorage.getItem('learnHub:authToken');
          if (!token) return;
          var parts = String(token).split('.');
          if (parts.length < 2) return;
          function b64urlDecode(str){
            str = str.replace(/-/g,'+').replace(/_/g,'/');
            while (str.length % 4) str += '=';
            try { return decodeURIComponent(escape(atob(str))); } catch(e){ try { return atob(str);} catch(e2){ return ''; } }
          }
          var payload = JSON.parse(b64urlDecode(parts[1]));
          if (payload && payload.exp){
            var now = Math.floor(Date.now()/1000);
            if (now >= Number(payload.exp)) return;
          }
          var primary = document.getElementById('lhCtaPrimary');
          var secondary = document.getElementById('lhCtaSecondary');
          var primaryM = document.getElementById('lhCtaPrimaryMobile');
          var secondaryM = document.getElementById('lhCtaSecondaryMobile');
          if (primary){
            primary.href = 'app/pages/home.html';
            var span = primary.querySelector('[data-i18n="landing.ctaLogin"]');
            if (span) span.setAttribute('data-i18n','landing.ctaDashboard');
          }
          if (secondary) secondary.classList.add('d-none');

          // Mobile buttons
          if (primaryM) primaryM.href = 'app/pages/home.html';
          if (secondaryM) secondaryM.classList.add('d-none');
        } catch(e){}
      })();
    </script>

</body>
</html>
