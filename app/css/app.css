/* App-specific tweaks (kept minimal to preserve Sneat design) */
:root{ --app-brand:#696cff; }

.app-hero{
  border: 1px solid rgba(105,108,255,.12);
  background: rgba(105,108,255,.06);
}

.code-block{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: .9rem;
  white-space: pre;
  overflow: auto;
  padding: 1rem;
  border-radius: .5rem;
  border: 1px solid rgba(67,89,113,.2);
  background: rgba(67,89,113,.04);
}

.lesson-content img{max-width:100%;height:auto;}

/* Small helper for empty states */
.empty-state{
  padding: 2.5rem 1.5rem;
  border: 1px dashed rgba(67,89,113,.25);
  border-radius: .75rem;
}


/* i18n + RTL support */
.rtl { direction: rtl; font-family: "Cairo", "Public Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
.ltr { direction: ltr; }



/* Swap common spacing utilities (minimal set for our pages) */
.rtl .ms-auto { margin-left: 0 !important; margin-right: auto !important; }
.rtl .ms-1 { margin-left: 0 !important; margin-right: .25rem !important; }
.rtl .me-2 { margin-right: 0 !important; margin-left: .5rem !important; }
.rtl .me-3 { margin-right: 0 !important; margin-left: 1rem !important; }
.rtl .text-end { text-align: left !important; }

@media (max-width: 575.98px){
  .table-responsive { font-size: .95rem; }
  .list-group-item .btn { white-space: nowrap; }
}



/* === RTL (Arabic UI) === */
html[dir="rtl"] { direction: rtl; }
html[dir="rtl"] body { font-family: "Cairo", "Public Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

/* RTL: sidebar on the RIGHT (natural RTL) */
html[dir="rtl"].layout-menu-fixed .layout-menu,
html[dir="rtl"].layout-menu-fixed-offcanvas .layout-menu {
  right: 0 !important;
  left: auto !important;
}

/* Desktop spacing (RTL): pad from the RIGHT, match menu width */
@media (min-width: 1200px) {
  html[dir="rtl"].layout-menu-fixed:not(.layout-menu-collapsed) .layout-page,
  html[dir="rtl"].layout-menu-fixed-offcanvas:not(.layout-menu-collapsed) .layout-page {
    padding-right: 16.25rem !important;
    padding-left: 0 !important;
  }
  html[dir="rtl"].layout-menu-fixed.layout-menu-collapsed .layout-page,
  html[dir="rtl"].layout-menu-fixed-offcanvas.layout-menu-collapsed .layout-page {
    padding-right: 5.25rem !important;
    padding-left: 0 !important;
  }
}

/* Mobile/tablet: full width content when offcanvas is hidden */
@media (max-width: 1199.98px) {
  html[dir="rtl"] .layout-page {
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  /* RTL mobile offcanvas menu should slide from the RIGHT (Sneat default is LEFT) */
  html[dir="rtl"] .layout-menu {
    left: auto !important;
    right: 0 !important;
    transform: translate3d(100%, 0, 0) !important;
  }
  html[dir="rtl"].layout-menu-expanded .layout-menu {
    transform: translate3d(0, 0, 0) !important;
  }
}

/* Submenu indentation (RTL-friendly) */
html[dir="rtl"] .menu-icon { margin-right: 0 !important; margin-left: 0.5rem !important; }
html[dir="rtl"] .menu-vertical .menu-sub .menu-link { padding-left: 0 !important; padding-right: 2.25rem !important; }
html[dir="rtl"] .menu-vertical .menu-sub .menu-sub .menu-link { padding-left: 0 !important; padding-right: 2.9rem !important; }
html[dir="rtl"] .menu-vertical .menu-sub .menu-sub .menu-sub .menu-link { padding-left: 0 !important; padding-right: 3.55rem !important; }

/* Utility swaps for RTL */
html[dir="rtl"] .ms-auto { margin-left: 0 !important; margin-right: auto !important; }
html[dir="rtl"] .ms-1 { margin-left: 0 !important; margin-right: .25rem !important; }
html[dir="rtl"] .me-2 { margin-right: 0 !important; margin-left: .5rem !important; }
html[dir="rtl"] .me-3 { margin-right: 0 !important; margin-left: 1rem !important; }
html[dir="rtl"] .text-end { text-align: left !important; }
html[dir="rtl"] .text-start { text-align: right !important; }

/* RTL FIX: force menu close/toggle button to the LEFT inside the side menu header */
html[dir="rtl"] .layout-menu .app-brand {
  position: relative !important;
  display: flex !important;
  align-items: center !important;
}
html[dir="rtl"] .layout-menu .app-brand .app-brand-link {
  margin-right: 0 !important;
  margin-left: auto !important; /* keep brand on the right */
}
html[dir="rtl"] .layout-menu .app-brand .layout-menu-toggle {
  position: absolute !important;
  left: .75rem !important;
  right: auto !important;
  margin: 0 !important;
}
html[dir="rtl"] .layout-menu .app-brand .layout-menu-toggle i.bx {
  transform: rotate(180deg);
}


/* small helpers */
#lessonDoneBadge { vertical-align: middle; }


/* Admin-only menu items */
[data-admin-only]{ display:none; }
body.admin-mode [data-admin-only]{ display:block; }


/* Lesson resources */
#lessonResources .list-group-item { gap: .5rem; }
html[dir="rtl"] #lessonResources .text-truncate { text-align: right; }



/* --- AI Assistant (Lesson) --- */
.ai-chat { display:flex; flex-direction:column; gap:.75rem; }
.ai-chat-toolbar { display:flex; flex-wrap:wrap; gap:.5rem; align-items:center; }
.ai-chat-messages { border:1px solid rgba(67,89,113,.2); border-radius:.5rem; padding:.75rem; max-height: 340px; overflow:auto; background: rgba(67,89,113,.02); }
.ai-msg { display:flex; gap:.5rem; margin-bottom:.65rem; }
.ai-msg:last-child { margin-bottom:0; }
.ai-msg .ai-bubble { padding:.55rem .7rem; border-radius:.65rem; max-width: 100%; white-space: pre-wrap; word-break: break-word; }
.ai-msg.user { justify-content:flex-end; }
.ai-msg.user .ai-bubble { background: rgba(105,108,255,.12); border:1px solid rgba(105,108,255,.25); }
.ai-msg.assistant .ai-bubble { background: #fff; border:1px solid rgba(67,89,113,.18); }
.ai-msg .ai-meta { font-size:.72rem; opacity:.65; margin-top:.15rem; }
.ai-chat-status { font-size:.85rem; }
html[dir="rtl"] .ai-chat-toolbar { flex-direction: row-reverse; }
html[dir="rtl"] .ai-msg.user { justify-content:flex-start; }

/* --- Navbar language dropdown + static profile placeholder --- */
.lh-profile-placeholder{
  width: 34px;
  height: 34px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: rgba(67, 89, 113, 0.08);
  border: 1px solid rgba(67, 89, 113, 0.12);
}

.navbar-nav.flex-row{ column-gap: .25rem; }

/* --- RTL navbar fixes (AR) ---
   Goal:
   - Search input stays on the FAR RIGHT of the topbar
   - Profile icon goes to the FAR LEFT
   - Language button sits just to the RIGHT of profile
   - Dropdown opens inward (to the right), never off-screen
*/
html[dir="rtl"] #layout-navbar #navbar-collapse{
  width: 100%;
  flex-direction: row !important;
  justify-content: space-between !important;
}

/* Make the action group (lang/profile) the left block, and search the right block */
html[dir="rtl"] #layout-navbar #navbar-collapse > ul.navbar-nav{
  order: 1;
  margin-left: 0 !important;
}
html[dir="rtl"] #layout-navbar #navbar-collapse > .navbar-nav.align-items-center{
  order: 2;
  margin-right: 0 !important;
}

/* Inside the action group (RTL): Profile far-left, Language next, Theme at the far right */
html[dir="rtl"] .lh-theme-item{ order: 1; }
html[dir="rtl"] .lh-lang-item{ order: 2; }
html[dir="rtl"] .lh-profile-item{ order: 3; }

/* In RTL, force the language dropdown to open inward (to the right) */
html[dir="rtl"] .lang-dropdown-menu{
  left: 0 !important;
  right: auto !important;
}


/* Global loader overlay */
#lhGlobalLoader.lh-loader{
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255,255,255,.55);
  z-index: 2000;
  backdrop-filter: blur(1px);
}
body.lh-loading{ overflow: hidden; }

/* --- Responsive tables -> cards on mobile ---
   Any <table> enhanced by ui.js receives .lh-table-cards.
   On small screens, we render each row as a card and print header labels
   using td::before (from data-label).
*/

@media (max-width: 768px){
  .lh-table-responsive-cards{ overflow-x: visible !important; }

  table.lh-table-cards{ border: 0; }
  table.lh-table-cards thead{ display:none; }
  table.lh-table-cards tbody{ display:block; }
  table.lh-table-cards tbody tr{
    display:block;
    margin: 0 0 .75rem 0;
    padding: .75rem .85rem;
    border: 1px solid rgba(67, 89, 113, 0.16);
    border-radius: .75rem;
    background: #fff;
    box-shadow: 0 2px 10px rgba(67, 89, 113, 0.06);
  }

  table.lh-table-cards tbody td,
  table.lh-table-cards tbody th{
    /* Stack label above value to avoid horizontal stretching on mobile */
    display:block;
    padding: .35rem 0;
    border: 0 !important;
    /* Override .text-nowrap wrappers in the template */
    white-space: normal !important;
    overflow-wrap: anywhere;
    word-break: break-word;
    min-width: 0;
  }

  table.lh-table-cards tbody td::before,
  table.lh-table-cards tbody th::before{
    content: attr(data-label);
    font-weight: 600;
    color: rgba(67, 89, 113, 0.85);
    display:block;
    margin-bottom: .15rem;
    max-width: 100%;
  }

  /* Actions column: show buttons together and always visible */
  table.lh-table-cards tbody td.lh-td-actions,
  table.lh-table-cards tbody th.lh-td-actions{
    display:flex;
    justify-content: flex-end;
    flex-wrap: wrap;
    gap: .5rem;
    margin-top: .35rem;
    padding-top: .65rem;
    border-top: 1px dashed rgba(67, 89, 113, 0.18) !important;
  }
  table.lh-table-cards tbody td.lh-td-actions::before,
  table.lh-table-cards tbody th.lh-td-actions::before{
    content: "";
    display:none;
  }

  /* RTL: keep label/value spacing natural */
  /* RTL: labels/values are stacked, keep actions aligned nicely */
  html[dir="rtl"] table.lh-table-cards tbody td.lh-td-actions,
  html[dir="rtl"] table.lh-table-cards tbody th.lh-td-actions{
    justify-content: flex-start;
  }
}

/* Generic helper to wrap long texts (course descriptions, lesson titles, etc.) */
.lh-wrap{
  white-space: normal !important;
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* --- AI Assistant Drawer --- */
.lh-ai-drawer{ width:min(520px, 92vw); }
.lh-ai-drawer .ai-chat-messages{ max-height: 52vh; }
.lh-ai-drawer .offcanvas-body{ display:flex; flex-direction:column; }
.lh-ai-drawer .ai-chat{ flex:1 1 auto; }

/* Selection -> Ask AI floating button */
.lh-ai-selection-btn{
  position: fixed;
  z-index: 3000;
  display: none;
  box-shadow: 0 8px 24px rgba(0,0,0,.15);
}
.lh-ai-selection-btn.show{ display: inline-flex; }

/* "typing" indicator inside chat */
.ai-typing{
  display:flex;
  justify-content:flex-start;
  margin: .35rem 0;
}
.ai-typing .ai-bubble{
  background: rgba(67, 89, 113, 0.08);
  color: rgba(67, 89, 113, 0.9);
  border-radius: 14px;
  padding: .6rem .75rem;
  width: fit-content;
}
.ai-typing .dots{
  display:inline-flex;
  gap: 6px;
  align-items:center;
}
.ai-typing .dots span{
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: currentColor;
  opacity: .35;
  animation: lhDot 1.2s infinite;
}
.ai-typing .dots span:nth-child(2){ animation-delay: .15s; }
.ai-typing .dots span:nth-child(3){ animation-delay: .3s; }
@keyframes lhDot{
  0%, 60%, 100%{ transform: translateY(0); opacity: .25; }
  30%{ transform: translateY(-3px); opacity: .75; }
}

@media (max-width: 576px){
  .lh-ai-drawer{ width: 100vw; }
  .lh-ai-drawer .ai-chat-messages{ max-height: 50vh; }
}


/* Global search dropdown (topbar) */
.lh-search-container{ position: relative; }
.lh-global-search-menu{
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  right: 0;
  max-height: 60vh;
  overflow: auto;
  z-index: 2000;
  padding: .25rem 0;
}
.lh-global-search-menu.show{ display: block; }
.lh-global-search-menu .dropdown-header{ font-size: .75rem; opacity: .7; }
.lh-global-search-menu .dropdown-item{ white-space: normal; }
.lh-global-search-menu .lh-search-sub{
  display: block;
  font-size: .75rem;
  opacity: .7;
  margin-top: .125rem;
}
@media (max-width: 575.98px){
  .lh-global-search-menu{
    left: -12px;
    right: -12px;
  }
}

/* ==============================
   Dark theme (applied via html[data-lh-theme="dark"])
   ============================== */
html[data-lh-theme="dark"] body{ background: #0b1020 !important; color: rgba(226,232,240,0.92); }
html[data-lh-theme="dark"] .text-muted{ color: rgba(203,213,225,0.72) !important; }

/* Surfaces */
html[data-lh-theme="dark"] .card,
html[data-lh-theme="dark"] .modal-content,
html[data-lh-theme="dark"] .dropdown-menu{ background: #111827 !important; }

html[data-lh-theme="dark"] .card,
html[data-lh-theme="dark"] .modal-content,
html[data-lh-theme="dark"] .dropdown-menu,
html[data-lh-theme="dark"] .hero-illustration,
html[data-lh-theme="dark"] .feature-tile{ border-color: rgba(148,163,184,0.18) !important; }

/* Feature tiles (landing) */
html[data-lh-theme="dark"] .feature-tile{ background: #0b1224 !important; }


/* Navbar + sidebar */
html[data-lh-theme="dark"] .bg-navbar-theme,
html[data-lh-theme="dark"] .navbar.bg-white{ background: #111827 !important; border-color: rgba(148,163,184,0.18) !important; }
html[data-lh-theme="dark"] .bg-menu-theme{ background: #0f172a !important; }
html[data-lh-theme="dark"] .menu-link,
html[data-lh-theme="dark"] .app-brand-text,
html[data-lh-theme="dark"] .navbar .navbar-brand,
html[data-lh-theme="dark"] .dropdown-item{ color: rgba(226,232,240,0.92) !important; }
html[data-lh-theme="dark"] .menu-item.active > .menu-link{ background: rgba(105,108,255,0.18) !important; }
html[data-lh-theme="dark"] .dropdown-item:hover{ background: rgba(148,163,184,0.12) !important; }
html[data-lh-theme="dark"] .dropdown-divider{ border-top-color: rgba(148,163,184,0.18) !important; }


/* Inputs */
html[data-lh-theme="dark"] .form-control,
html[data-lh-theme="dark"] .form-select{
  background-color: #0b1224 !important;
  border-color: rgba(148,163,184,0.22) !important;
  color: rgba(226,232,240,0.92) !important;
}
html[data-lh-theme="dark"] .form-control::placeholder{ color: rgba(203,213,225,0.5) !important; }
html[data-lh-theme="dark"] .lh-search-container{ background: transparent; }

/* Landing page specific */
html[data-lh-theme="dark"] .landing-shell{
  /* Keep landing background FLAT in dark (no gradients) */
  background: #0b1020 !important;
}

html[data-lh-theme="dark"] .landing-footer,
html[data-lh-theme="dark"] .bg-footer-theme{
  background: #0f172a !important;
  border-color: rgba(148,163,184,0.18) !important;
}
html[data-lh-theme="dark"] .landing-footer .text-muted,
html[data-lh-theme="dark"] .bg-footer-theme .text-muted{ color: rgba(203,213,225,0.72) !important; }


/* Loader overlay */
html[data-lh-theme="dark"] #lhGlobalLoader.lh-loader{ background: rgba(15,23,42,.55); }

/* Dark theme polish: AI drawer surfaces */

/* Offcanvas (AI drawer) */
html[data-lh-theme="dark"] .offcanvas{ background: #111827 !important; color: rgba(226,232,240,0.92) !important; }
html[data-lh-theme="dark"] .offcanvas .offcanvas-header{ border-bottom: 1px solid rgba(148,163,184,0.18) !important; }
html[data-lh-theme="dark"] .offcanvas .offcanvas-body{ color: rgba(226,232,240,0.92) !important; }
html[data-lh-theme="dark"] .offcanvas .btn-close{ filter: invert(1) grayscale(100%); opacity: .85; }

html[data-lh-theme="dark"] .ai-chat-messages{ background: #0b1224 !important; border-color: rgba(148,163,184,0.22) !important; }
html[data-lh-theme="dark"] .ai-msg.assistant .ai-bubble{ background: #0b1224 !important; border-color: rgba(148,163,184,0.22) !important; color: rgba(226,232,240,0.92) !important; }
html[data-lh-theme="dark"] .ai-msg.user .ai-bubble{ color: rgba(226,232,240,0.92) !important; }
html[data-lh-theme="dark"] .ai-typing .ai-bubble{ background: #0b1224 !important; border-color: rgba(148,163,184,0.22) !important; color: rgba(226,232,240,0.92) !important; }

/* Footers */
html[data-lh-theme="dark"] .content-footer,
html[data-lh-theme="dark"] footer{ border-color: rgba(148,163,184,0.18) !important; }
html[data-lh-theme="dark"] footer.bg-footer-theme,
html[data-lh-theme="dark"] .content-footer{ background: #0f172a !important; }

/* ==========================================================
   Landing page (index.html) â€” keep CSS in app.css only
   ========================================================== */

body.landing-shell{ background: #f6f7fb; }
.landing-shell{
  background:
    radial-gradient(900px 400px at 15% 10%, rgba(105, 108, 255, 0.10), transparent 60%),
    radial-gradient(700px 350px at 85% 30%, rgba(3, 195, 236, 0.08), transparent 60%);
}

.landing-hero{ padding: 5rem 0 3rem; }
.lh-brand-icon{ width: 28px; height: 28px; }
.lh-brand-logo{ height: 30px; width: auto; }

.feature-tile{
  border: 1px solid rgba(67, 89, 113, 0.12);
  border-radius: 0.75rem;
  height: 100%;
  background: #fff;
}
.feature-tile .badge{
  width: 34px;
  height: 34px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.6rem;
}
.feature-tile .feature-text{ line-height: 1.25; }

.landing-footer{ padding: 2rem 0; }
.lang-pill{ cursor: pointer; }

.landing-card{
  border: 1px solid rgba(67, 89, 113, 0.12);
  border-radius: 1rem;
  background: rgba(255,255,255,0.9);
  backdrop-filter: blur(6px);
}

.hero-illustration{
  border: 1px solid rgba(67, 89, 113, 0.12);
  border-radius: 1rem;
  background: rgba(255,255,255,0.9);
  overflow: hidden;
}
.hero-illustration img{ width: 100%; display: block; }

/* Carousel sizing (keep visuals consistent) */
.hero-carousel img{ height: 360px; object-fit: contain; background: #fff; }
@media (max-width: 575.98px){
  .hero-carousel img{ height: 240px; }
  .hero-carousel .carousel-control-prev,
  .hero-carousel .carousel-control-next{ width: 18%; }
}

.tools-dropdown .dropdown-menu{ min-width: 12rem; }
.hero-badges .badge{ border-radius: 999px; padding: 0.5rem 0.75rem; }
.hero-title{ font-size: 2.6rem; line-height: 1.15; letter-spacing: -0.02em; }
.hero-subtitle{ max-width: 44rem; }

/* Mobile polish: breathing room so text/buttons don't touch edges */
@media (max-width: 575.98px){
  .navbar .container, main.container, footer .container{ padding-left: 1rem !important; padding-right: 1rem !important; }
  .landing-hero{ padding: 2.75rem 0 2rem; }
  .lh-brand-logo{ height: 24px; }
  .navbar .btn{ padding: 0.5rem 0.75rem; }
  .navbar .dropdown-toggle{ padding: 0.5rem 0.65rem; }
  .hero-ctas .btn{ width: 100%; }
  .hero-ctas{ gap: 0.75rem !important; }
  .hero-title{ font-size: 1.75rem; line-height: 1.25; }
  .hero-subtitle{ font-size: 1rem !important; }
}

/* Landing dark overrides */
/* landing-shell itself is forced flat earlier in dark section */
html[data-lh-theme="dark"] .landing-card{
  background: rgba(17,24,39,0.88) !important;
  border-color: rgba(148,163,184,0.18) !important;
}
html[data-lh-theme="dark"] .landing-card,
html[data-lh-theme="dark"] .landing-card h1,
html[data-lh-theme="dark"] .landing-card h5,
html[data-lh-theme="dark"] .landing-card .fw-semibold{
  color: rgba(255,255,255,0.92) !important;
}
html[data-lh-theme="dark"] .landing-card .text-muted{ color: rgba(226,232,240,0.78) !important; }
html[data-lh-theme="dark"] .feature-tile{
  background: #0b1224 !important;
  border-color: rgba(148,163,184,0.18) !important;
}
/* Keep slider area white in dark (images are white) */
html[data-lh-theme="dark"] .hero-illustration,
html[data-lh-theme="dark"] .hero-carousel img{ background: #ffffff !important; }

/* Landing navbar in dark */
html[data-lh-theme="dark"] .landing-nav{
  background: #0f172a !important;
  border-color: rgba(148,163,184,0.18) !important;
}



/* --- Dark overrides for mobile table-cards (avoid white cards) --- */
@media (max-width: 768px){
  html[data-lh-theme="dark"] table.lh-table-cards tbody tr{
    background: #111827 !important;
    border-color: rgba(148,163,184,0.18) !important;
    box-shadow: 0 2px 10px rgba(0,0,0,0.35);
  }
  html[data-lh-theme="dark"] table.lh-table-cards tbody td::before{
    color: rgba(203,213,225,0.72) !important;
  }
}



/* Auth button spinner alignment (mobile-friendly) */
.lh-btn{
  display:flex !important;
  align-items:center;
  justify-content:center;
}
.lh-btn .lh-btn-content{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.5rem;
}
.lh-btn .spinner-border{
  flex:0 0 auto;
}


/* Hidden answer: selectable but visually transparent */
.lh-hidden-answer{
  color: transparent;
  user-select: text;
  -webkit-user-select: text;
  display: inline-block;
  min-width: 120px;
  padding: 2px 8px;
  border-radius: 8px;
  background: rgba(0,0,0,.04);
  cursor: text;
}
.lh-hidden-answer::selection{
  color: #111;
  background: rgba(105,108,255,.18);
}
